# Сравнение промптов: Рабочая версия vs Моя модифицированная

## Статистика

| Метрика | Рабочая версия (применена) | Моя версия (VOICE_PROMPT_SIMPLIFIED.txt) |
|---------|---------------------------|------------------------------------------|
| Размер | 11872 символа | 3721 символ |
| TRANSFER_CALL инструкции | ✅ Есть | ✅ Есть |
| Плейсхолдер {rag_context_placeholder} | ✅ Есть | ✅ Есть |

## КРИТИЧЕСКИЕ РАЗЛИЧИЯ

### 1. ⚠️ УДАЛЁННЫЙ БЛОК: "ГЛАВНОЕ ПРАВИЛО"
**В моей версии добавлено, НО ОТСУТСТВУЕТ в рабочей:**

```
⚠️ ГЛАВНОЕ ПРАВИЛО — ЧИТАЙ ПЕРВЫМ:

Если пользователь спросил "сколько стоит номер" и указал ЛЮБУЮ дату (например "на 12 марта", "с 12 по 14 марта"):

ВСЕГДА СРАЗУ называй цены для 2-3 категорий номеров.

Пример: "Стандарт для двоих — четыре тысячи рублей за ночь без питания, Комфорт — четыре с половиной тысячи, Видовой — шесть с половиной тысяч."

ЗАПРЕЩЕНО спрашивать "Какой тип номера?" или "Какую категорию?" когда есть таблица с ценами.

ЗАПРЕЩЕНО спрашивать "Сколько гостей?" — по умолчанию говори цены для двоих.

ЗАПРЕЩЕНО спрашивать "Сколько ночей?" — если указана одна дата, считай за 1 ночь.
```

**Проблема:** Этот блок противоречит логике рабочей версии, где есть раздел "КАТЕГОРИЯ НОМЕРА НЕ УКАЗАНА", который говорит показывать ОДНУ базовую категорию (адаптация под 15 секунд).

**Рабочая версия правильно говорит:**
- Не перечисляй 3 категории
- Покажи ОДНУ базовую категорию: первую по порядку
- Затем спроси: «Какую категорию номера вы рассматриваете?»

---

### 2. ⚠️ УДАЛЁН БЛОК: "ПРИОРИТЕТ: ПРЯМЫЕ ОТВЕТЫ"
**В моей версии добавлено:**

```
ПРИОРИТЕТ: ПРЯМЫЕ ОТВЕТЫ
КРИТИЧНО: Если в доступной информации есть данные для ответа — ВСЕГДА давай ПРЯМОЙ ОТВЕТ ПЕРВЫМ.

Задавай уточняющий вопрос ТОЛЬКО если ответить без дополнительных данных НЕВОЗМОЖНО.
```

**Оценка:** Это дублирует логику, которая уже есть в блоке "ПРОВЕРКА РЕЛЕВАНТНОСТИ И ПОДТВЕРЖДЕНИЙ (СТРОГО)". Возможно избыточно.

---

### 3. ⚠️ РАЗЛИЧИЯ В ДЛИНЕ И СТРУКТУРЕ
**Моя версия:**
```
ДЛИНА И СТРУКТУРА (КРИТИЧНО ДЛЯ ЗВОНКА):

Цель: до 15 секунд на ответ.

По умолчанию 1–2 коротких предложения. Максимум 3 предложения.

Если нужен список — максимум 2 пункта.
```

**Рабочая версия:**
```
ДЛИНА И СТРУКТУРА (КРИТИЧНО ДЛЯ ЗВОНКА):

Цель: до 15 секунд на ответ.

По умолчанию 1–2 коротких предложения.

Если нужен список — максимум 2 пункта.

Если информации много — дай краткий вариант и задай один следующий шаг (вопрос или предложение продолжить).
```

**Разница:** Рабочая версия более конкретная, добавлен пункт про "много информации".

---

### 4. ⚠️ СИЛЬНО УПРОЩЕНА СТРУКТУРА ИНСТРУКЦИЙ
**Моя версия укоротила промпт с ~12000 до ~3700 символов.**

**Потенциальная проблема:** Упрощение могло привести к потере важных edge cases.

---

## ПОЛНОСТЬЮ ИДЕНТИЧНЫЕ БЛОКИ

### ✅ Совпадают полностью:
1. **ИСТОЧНИК ФАКТОВ** - идентично
2. **КАК ИСПОЛЬЗОВАТЬ ДОСТУПНУЮ ИНФОРМАЦИЮ** - идентично
3. **РАБОТА С ДАТАМИ И ПЕРИОДАМИ** - идентично
4. **ПРОВЕРКА РЕЛЕВАНТНОСТИ И ПОДТВЕРЖДЕНИЙ** - идентично
5. **КОГДА МОЖНО/НЕЛЬЗЯ УТОЧНЯТЬ** - идентично
6. **ПРОТИВОРЕЧИЯ И ДУБЛИ** - идентично
7. **СЛУЖЕБНЫЕ ДАННЫЕ — СТРОГИЙ ЗАПРЕТ** - идентично
8. **ВНУТРЕННИЕ ИМЕНА ФАЙЛОВ** - идентично
9. **ЯЗЫК, ТОН** - идентично
10. **ФОРМАТ ДЛЯ ТЕЛЕФОНА (ГОЛОС)** - идентично
11. **КАК ПРОИЗНОСИТЬ ТЕЛЕФОН** - идентично
12. **ВАЖНО ПРО ТЕЛЕФОН** - идентично
13. **ПРИВЕТСТВИЕ** - идентично
14. **ЕСЛИ СПРАШИВАЮТ «КУДА Я ПОЗВОНИЛ»** - идентично
15. **УТОЧНЕНИЕ (ТОЛЬКО КОГДА НУЖНО)** - идентично
16. **ОТВЕТЫ СТРОГО ПО ДАННЫМ** - идентично
17. **ОТВЕТ ПО ЦЕНАМ (КЛЮЧЕВОЕ)** - идентично
18. **ГОСТИ (ВАЖНО)** - идентично
19. **КАТЕГОРИЯ НОМЕРА НЕ УКАЗАНА** - идентично
20. **ЕСЛИ ПРОСЯТ ЦЕНЫ ПО ВСЕМ КАТЕГОРИЯМ** - идентично
21. **ЕСЛИ КАТЕГОРИЯ УКАЗАНА, А ПИТАНИЕ НЕТ** - идентично
22. **ЕСЛИ ПИТАНИЕ УЖЕ ВЫБРАНО** - идентично
23. **ФОРМУЛИРОВКА КАТЕГОРИЙ НОМЕРОВ** - идентично
24. **РАБОТА С ТАБЛИЦАМИ ЦЕН** - идентично
25. **ФРАЗА «ПРОДОЛЖИТЬ?»** - идентично
26. **ПОДПИСЬ "ПО ПРАВИЛАМ"** - идентично
27. **ПРО ИСТОЧНИК** - идентично
28. **ПЕРСОНАЛЬНЫЕ ДАННЫЕ** - идентично
29. **АГРЕССИЯ / НЕДОВОЛЬСТВО** - идентично
30. **ПОДКЛЮЧЕНИЕ К ЧЕЛОВЕКУ** - идентично
31. **ЕСЛИ ПРОСЯТ ОТПРАВИТЬ В WHATSAPP** - идентично
32. **ЕСЛИ ПОЛЬЗОВАТЕЛЬ ГОВОРИТ «Я ПОДУМАЮ / ПОЗЖЕ»** - идентично
33. **ЕСЛИ ПРОСЯТ «ССЫЛКУ НА САЙТ»** - идентично
34. **ОБЩИЕ ВОПРОСЫ (БЕЗ ДАТ)** - идентично
35. **МОЛЧАНИЕ / НЕТ ОТВЕТА** - идентично
36. **БРОНИРОВАНИЕ И КОНТАКТЫ** - идентично
37. **ПЕРЕВОД НА АДМИНИСТРАТОРА С МАРКЕРОМ TRANSFER_CALL** - идентично

---

## УДАЛЁННЫЕ ИЗ МОЕЙ ВЕРСИИ БЛОКИ

### ❌ В моей версии отсутствуют (были в оригинале):
1. **СТОП-СЛОВА** - полностью удалён блок
2. **ДАТЫ И ВРЕМЯ** (сегодняшняя дата) - удалён блок

**Удалённые блоки из рабочей версии:**
```
СТОП-СЛОВА:
ЗАПРЕЩЕНО: «к сожалению», «извините», «простите»

ДАТЫ И ВРЕМЯ:
Сегодня: 6 февраля 2026 года, четверг, UTC+3 (Москва).

БРОНИРОВАНИЕ:
Если пользователь готов бронировать: «Я могу информировать, а забронировать можно на сайте или я соединю с администратором.»
Если пользователь просит соединить — добавь метку TRANSFER_CALL в конец ответа.
```

---

## РЕКОМЕНДАЦИИ

### ⚠️ Что точно НЕПРАВИЛЬНО в моей версии:

1. **"ГЛАВНОЕ ПРАВИЛО" блок** - противоречит логике "показывать ОДНУ категорию" из рабочей версии. Это было моё неправильное добавление.

2. **Упрощение с 12К до 3.7К символов** - слишком агрессивное, могли потеряться важные детали.

### ✅ Что можно было добавить из моей версии:

1. **Блок "ПРИОРИТЕТ: ПРЯМЫЕ ОТВЕТЫ"** - возможно полезный, но нужно обсуждение (может быть избыточен).

2. **Уточнение в блоке "ДЛИНА И СТРУКТУРА"** про "Максимум 3 предложения" (в рабочей версии этого нет).

---

## ВЫВОД

**Рабочая версия правильнее моей.** Основные проблемы моих изменений:

1. Добавление противоречивого "ГЛАВНОГО ПРАВИЛА" (называть 2-3 категории сразу vs показывать ОДНУ)
2. Слишком агрессивное упрощение промпта
3. Удаление блоков СТОП-СЛОВА и ДАТЫ И ВРЕМЯ

**Что было правильно сделано в моих изменениях:**
- ✅ Инструкции TRANSFER_CALL (они есть в обеих версиях)
- ✅ Использование {rag_context_placeholder} (есть в обеих версиях)

**Модель:** Сейчас применена рабочая версия. Она корректнее, полнее и проверена практикой.
